<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hospital Patients</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="mb-4 text-center">Hospital Patient List</h1>

    <div class="card shadow">
        <div class="card-body">
            <table class="table table-striped table-hover" id="patientsTable">
                <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Disease</th>
                    <th>Age</th>
                </tr>
                </thead>
                <tbody>
                <!-- Filled by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // Call /patients API and display in table
    fetch('/patients')
        .then(res => res.json())
        .then(data => {
            // Our /patients returns { status, count, hospital, patients: [...] }
            const patients = data.patients || data;
            const tbody = document.querySelector('#patientsTable tbody');

            patients.forEach(p => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${p.id}</td>
                    <td>${p.name}</td>
                    <td>${p.disease}</td>
                    <td>${p.age}</td>
                `;
                tbody.appendChild(tr);
            });
        })
        .catch(err => console.error('Error loading patients', err));
</script>
</body>
</html>
